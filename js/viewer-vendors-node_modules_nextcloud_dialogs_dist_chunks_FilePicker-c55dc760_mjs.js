/*! For license information please see viewer-vendors-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-c55dc760_mjs.js.LICENSE.txt */
"use strict";(self.webpackChunkviewer=self.webpackChunkviewer||[]).push([["vendors-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-c55dc760_mjs"],{4257:(e,t,i)=>{i.r(t),i.d(t,{default:()=>O});var l=i(144),n=i(5040);l.ZP.util.warn;function o(e){return!!(0,l.nZ)()&&((0,l.EB)(e),!0)}function a(e){return"function"==typeof e?e():(0,l.SU)(e)}const s="undefined"!=typeof window&&"undefined"!=typeof document;Object.prototype.toString;function r(e){const t=Object.create(null);return i=>t[i]||(t[i]=e(i))}const c=/\B([A-Z])/g,u=(r((e=>e.replace(c,"-$1").toLowerCase())),/-(\w)/g);r((e=>e.replace(u,((e,t)=>t?t.toUpperCase():""))));l.ZP.util.warn;function d(e){var t;const i=a(e);return null!=(t=null==i?void 0:i.$el)?t:i}const p=s?window:void 0;s&&window.document,s&&window.navigator,s&&window.location;function f(e){const t=function(){const e=(0,l.iH)(!1);return(0,l.FN)()&&(0,l.bv)((()=>{e.value=!0})),e}();return(0,l.Fl)((()=>(t.value,Boolean(e()))))}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function v(e,t,i={}){const{window:n=p,...a}=i;let s;const r=f((()=>n&&"ResizeObserver"in n)),c=()=>{s&&(s.disconnect(),s=void 0)},u=(0,l.Fl)((()=>Array.isArray(e)?e.map((e=>d(e))):[d(e)])),v=(0,l.YP)(u,(e=>{if(c(),r.value&&n){s=new ResizeObserver(t);for(const t of e)t&&s.observe(t,a)}}),{immediate:!0,flush:"post",deep:!0}),m=()=>{c(),v()};return o(m),{isSupported:r,stop:m}}function m(e,t={width:0,height:0},i={}){const{window:n=p,box:o="content-box"}=i,a=(0,l.Fl)((()=>{var t,i;return null==(i=null==(t=d(e))?void 0:t.namespaceURI)?void 0:i.includes("svg")})),s=(0,l.iH)(t.width),r=(0,l.iH)(t.height);return v(e,(([t])=>{const i="border-box"===o?t.borderBoxSize:"content-box"===o?t.contentBoxSize:t.devicePixelContentBoxSize;if(n&&a.value){const t=d(e);if(t){const e=n.getComputedStyle(t);s.value=Number.parseFloat(e.width),r.value=Number.parseFloat(e.height)}}else if(i){const e=Array.isArray(i)?i:[i];s.value=e.reduce(((e,{inlineSize:t})=>e+t),0),r.value=e.reduce(((e,{blockSize:t})=>e+t),0)}else s.value=t.contentRect.width,r.value=t.contentRect.height}),i),(0,l.YP)((()=>d(e)),(e=>{s.value=e?t.width:0,r.value=e?t.height:0})),{width:s,height:r}}Number.POSITIVE_INFINITY;var _=i(4844),g=i(1352),h=i(6470),w=i(3554),y=i(7845),b=i(9753),C=i(1936),k=i(4139);function F(e,t,i,l,n,o,a,s){var r,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),l&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(r=function(e){!(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)&&typeof __VUE_SSR_CONTEXT__<"u"&&(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=r):n&&(r=s?function(){n.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:n),r)if(c.functional){c._injectStyles=r;var u=c.render;c.render=function(e,t){return r.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,r):[r]}return{exports:e,options:c}}const S=F({name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon file-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const x=F((0,l.aZ)({__name:"DialogButton",props:{callback:null,label:null,icon:{default:void 0},type:{default:"secondary"}},emits:["click"],setup(e,t){let{emit:i}=t;const l=e;return{__sfc:!0,props:l,emit:i,handleClick:e=>{var t;null==(t=l.callback)||t.call(l),i("click",e)},NcButton:n.P2,NcIconSvgWrapper:n.FK}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcButton,{attrs:{"aria-label":i.props.label,type:i.props.type},on:{click:i.handleClick},scopedSlots:e._u([void 0!==i.props.icon?{key:"icon",fn:function(){return["string"==typeof i.props.icon?t(i.NcIconSvgWrapper,{attrs:{svg:i.props.icon}}):t(i.props.icon,{tag:"component",attrs:{size:20}})]},proxy:!0}:null],null,!0)},[e._v(" "+e._s(i.props.label)+" ")])}),[],!1,null,null,null,null).exports;const N=F((0,l.aZ)({__name:"DialogBase",props:{name:null,message:{default:""},additionalTrapElements:{default:()=>[]},container:{default:void 0},size:{default:"small"},buttons:{default:()=>[]},navigationClasses:{default:()=>[]},contentClasses:{default:()=>[]},dialogClasses:{default:()=>[]}},emits:["close"],setup(e,t){let{emit:i}=t;const o=e,a=(0,l.Rr)(),s=(0,l.iH)(),{width:r}=m(s),c=(0,l.Fl)((()=>r.value<876)),u=(0,l.Fl)((()=>void 0!==(null==a?void 0:a.navigation))),d=(0,l.iH)(!0),p=(0,l.Fl)((()=>({additionalTrapElements:o.additionalTrapElements,container:void 0===o.container?"body":o.container,name:o.name,size:o.size,enableSlideshow:!1,enableSwipe:!1})));return{__sfc:!0,props:o,emit:i,slots:a,wrapper:s,dialogWidth:r,isNavigationCollapsed:c,hasNavigation:u,open:d,handleClose:()=>{d.value=!1,i("close")},modalProps:p,NcModal:n.Jc,DialogButton:x}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return i.open?t(i.NcModal,e._b({staticClass:"dialog__modal",on:{close:i.handleClose}},"NcModal",i.modalProps,!1),[t("h2",{staticClass:"dialog__name",domProps:{textContent:e._s(e.name)}}),t("div",{staticClass:"dialog",class:e.dialogClasses},[t("div",{ref:"wrapper",class:["dialog__wrapper",{"dialog__wrapper--collapsed":i.isNavigationCollapsed}]},[i.hasNavigation?t("nav",{staticClass:"dialog__navigation",class:e.navigationClasses},[e._t("navigation",null,{isCollapsed:i.isNavigationCollapsed})],2):e._e(),t("div",{staticClass:"dialog__content",class:e.contentClasses},[e._t("default",(function(){return[t("p",[e._v(e._s(i.props.message))])]}))],2)]),t("div",{staticClass:"dialog__actions"},[e._t("actions",(function(){return e._l(i.props.buttons,(function(l,n){return t(i.DialogButton,e._b({key:n,on:{click:i.handleClose}},"DialogButton",l,!1))}))}))],2)])]):e._e()}),[],!1,null,"89afd3fd",null,null).exports,B=()=>{var e,t,i;const n=(0,w.j)("files","config",null),o=(0,l.iH)(null!=(e=null==n?void 0:n.show_hidden)&&e),a=(0,l.iH)(null==(t=null==n?void 0:n.sort_favorites_first)||t),s=(0,l.iH)(null==(i=null==n?void 0:n.crop_image_previews)||i);return(0,l.bv)((()=>{y.Z.get((0,b.nu)("/apps/files/api/v1/configs")).then((e=>{var t,i,l,n,r,c,u,d,p;o.value=null!=(l=null==(i=null==(t=e.data)?void 0:t.data)?void 0:i.show_hidden)&&l,a.value=null==(c=null==(r=null==(n=e.data)?void 0:n.data)?void 0:r.sort_favorites_first)||c,s.value=null==(p=null==(d=null==(u=e.data)?void 0:u.data)?void 0:d.crop_image_previews)||p}))})),{showHiddenFiles:o,sortFavoritesFirst:a,cropImagePreviews:s}};const P=F({name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-up-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,15L12,10L17,15H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const z=F({name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon menu-down-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M7,10L12,15L17,10H7Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports,L={"file-picker__file-icon":"_file-picker__file-icon_1vgv4_5"};const I=F((0,l.aZ)({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup:e=>({__sfc:!0,fileListIconStyles:L})}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",{staticClass:"file-picker__row loading-row",attrs:{"aria-hidden":"true"}},[e.showCheckbox?t("td",{staticClass:"row-checkbox"},[t("span")]):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"row-wrapper"},[t("span",{class:i.fileListIconStyles["file-picker__file-icon"]}),t("span")])]),e._m(0),e._m(1)])}),[function(){var e=this._self._c;return this._self._setupProxy,e("td",{staticClass:"row-size"},[e("span")])},function(){var e=this._self._c;return this._self._setupProxy,e("td",{staticClass:"row-modified"},[e("span")])}],!1,null,"6aded0d9",null,null).exports;const H=F({name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon folder-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const V=F((0,l.aZ)({name:"FilePreview",props:{node:null},setup(e){const t=e,i=(0,l.iH)(L),{cropImagePreviews:n}=B(),o=(0,l.Fl)((()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;t={size:32,cropPreview:!1,mimeFallback:!0,...t};try{const l=(null==(i=e.attributes)?void 0:i.previewUrl)||(0,b.nu)("/core/preview?fileId={fileid}",{fileid:e.fileid});let n;try{n=new URL(l)}catch{n=new URL(l,window.location.origin)}return n.searchParams.set("x","".concat(t.size)),n.searchParams.set("y","".concat(t.size)),n.searchParams.set("mimeFallback","".concat(t.mimeFallback)),n.searchParams.set("a",!0===t.cropPreview?"0":"1"),n.searchParams.set("c","".concat(e.attributes.etag)),n}catch{return null}}(t.node,{cropPreview:n.value}))),a=(0,l.Fl)((()=>t.node.type===_.Tv.File)),s=(0,l.iH)(!1);return(0,l.YP)(o,(()=>{if(s.value=!1,o.value){const e=document.createElement("img");e.src=o.value.href,e.onerror=()=>e.remove(),e.onload=()=>{s.value=!0,e.remove()},document.body.appendChild(e)}}),{immediate:!0}),{__sfc:!0,fileListIconStyles:i,props:t,cropImagePreviews:n,previewURL:o,isFile:a,canLoadPreview:s,t:C.t,IconFile:S,IconFolder:H}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{class:i.fileListIconStyles["file-picker__file-icon"],style:i.canLoadPreview?{backgroundImage:"url(".concat(i.previewURL,")")}:void 0,attrs:{"aria-label":i.t("MIME type {mime}",{mime:e.node.mime||i.t("unknown")})}},[i.canLoadPreview?e._e():[i.isFile?t(i.IconFile,{attrs:{size:20}}):t(i.IconFolder,{attrs:{size:20}})]],2)}),[],!1,null,null,null,null).exports;const D=F((0,l.aZ)({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:null},emits:["update:selected","enter-directory"],setup(e,t){let{emit:i}=t;const o=e,a=(0,l.Fl)((()=>{var e;return(null==(e=o.node.attributes)?void 0:e.displayName)||o.node.basename.slice(0,o.node.extension?-o.node.extension.length:void 0)})),s=(0,l.Fl)((()=>o.node.extension)),r=(0,l.Fl)((()=>o.node.type===_.Tv.Folder)),c=(0,l.Fl)((()=>o.canPick&&(o.allowPickDirectory||!r.value)));function u(){i("update:selected",!o.selected)}function d(){r.value?i("enter-directory",o.node):u()}return{__sfc:!0,props:o,emit:i,displayName:a,fileExtension:s,isDirectory:r,isPickable:c,toggleSelected:u,handleClick:d,handleKeyDown:function(e){"Enter"===e.key&&d()},formatFileSize:_.sS,NcCheckboxRadioSwitch:n.rw,NcDateTime:n.Jh,t:C.t,FilePreview:V}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("tr",e._g({class:["file-picker__row",{"file-picker__row--selected":e.selected&&!e.showCheckbox}],attrs:{tabindex:e.showCheckbox&&!i.isDirectory?void 0:0,"aria-selected":i.isPickable?e.selected:void 0,"data-filename":e.node.basename,"data-testid":"file-list-row"},on:{click:i.handleClick}},!e.showCheckbox||i.isDirectory?{keydown:i.handleKeyDown}:{}),[e.showCheckbox?t("td",{staticClass:"row-checkbox"},[t(i.NcCheckboxRadioSwitch,{attrs:{disabled:!i.isPickable,checked:e.selected,"aria-label":i.t("Select the row for {nodename}",{nodename:i.displayName}),"data-testid":"row-checkbox"},on:{click:function(e){e.stopPropagation()},"update:checked":i.toggleSelected}})],1):e._e(),t("td",{staticClass:"row-name"},[t("div",{staticClass:"file-picker__name-container",attrs:{"data-testid":"row-name"}},[t(i.FilePreview,{attrs:{node:e.node}}),t("div",{staticClass:"file-picker__file-name",attrs:{title:i.displayName},domProps:{textContent:e._s(i.displayName)}}),t("div",{staticClass:"file-picker__file-extension",domProps:{textContent:e._s(i.fileExtension)}})],1)]),t("td",{staticClass:"row-size"},[e._v(" "+e._s(i.formatFileSize(e.node.size||0))+" ")]),t("td",{staticClass:"row-modified"},[t(i.NcDateTime,{attrs:{timestamp:e.node.mtime,"ignore-seconds":!0}})],1)])}),[],!1,null,"d337ebac",null,null).exports;const M=F((0,l.aZ)({__name:"FileList",props:{currentView:null,multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:null,selectedFiles:null,path:null},emits:["update:path","update:selectedFiles"],setup(e,t){let{emit:i}=t;const o=e,s=(0,l.iH)(),{currentConfig:r}=(e=>{var t,i,n,o,s,r,c,u,d,p,f,v;const m=e=>"asc"===e?"ascending":"desc"===e?"descending":"none",_=(0,w.j)("files","viewConfigs",null),g=(0,l.iH)({sortBy:null!=(i=null==(t=null==_?void 0:_.files)?void 0:t.sorting_mode)?i:"basename",order:m(null!=(o=null==(n=null==_?void 0:_.files)?void 0:n.sorting_direction)?o:"asc")}),h=(0,l.iH)({sortBy:null!=(r=null==(s=null==_?void 0:_.recent)?void 0:s.sorting_mode)?r:"basename",order:m(null!=(u=null==(c=null==_?void 0:_.recent)?void 0:c.sorting_direction)?u:"asc")}),C=(0,l.iH)({sortBy:null!=(p=null==(d=null==_?void 0:_.favorites)?void 0:d.sorting_mode)?p:"basename",order:m(null!=(v=null==(f=null==_?void 0:_.favorites)?void 0:f.sorting_direction)?v:"asc")});(0,l.bv)((()=>{y.Z.get((0,b.nu)("/apps/files/api/v1/views")).then((e=>{var t,i,l,n,o,a,s,r,c,u,d,p,f,v,_,w,y,b,k,F,S;g.value={sortBy:null!=(n=null==(l=null==(i=null==(t=e.data)?void 0:t.data)?void 0:i.files)?void 0:l.sorting_mode)?n:"basename",order:m(null==(s=null==(a=null==(o=e.data)?void 0:o.data)?void 0:a.files)?void 0:s.sorting_direction)},C.value={sortBy:null!=(d=null==(u=null==(c=null==(r=e.data)?void 0:r.data)?void 0:c.favorites)?void 0:u.sorting_mode)?d:"basename",order:m(null==(v=null==(f=null==(p=e.data)?void 0:p.data)?void 0:f.favorites)?void 0:v.sorting_direction)},h.value={sortBy:null!=(b=null==(y=null==(w=null==(_=e.data)?void 0:_.data)?void 0:w.recent)?void 0:y.sorting_mode)?b:"basename",order:m(null==(S=null==(F=null==(k=e.data)?void 0:k.data)?void 0:F.recent)?void 0:S.sorting_direction)}}))}));const k=(0,l.Fl)((()=>"files"===a(e||"files")?g.value:"recent"===a(e)?h.value:C.value)),F=(0,l.Fl)((()=>k.value.sortBy)),S=(0,l.Fl)((()=>k.value.order));return{filesViewConfig:g,favoritesViewConfig:C,recentViewConfig:h,currentConfig:k,sortBy:F,order:S}})(o.currentView),c=(0,l.Fl)((()=>{var e;return null!=(e=s.value)?e:r.value})),u=(0,l.Fl)((()=>"basename"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0)),d=(0,l.Fl)((()=>"size"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0)),p=(0,l.Fl)((()=>"mtime"===c.value.sortBy?"none"===c.value.order?void 0:c.value.order:void 0)),{sortFavoritesFirst:f}=B(),v=(0,l.Fl)((()=>{const e={ascending:(e,t,i)=>i(e,t),descending:(e,t,i)=>i(t,e),none:(e,t,i)=>0},t={basename:(e,t)=>{var i,l;return((null==(i=e.attributes)?void 0:i.displayName)||e.basename).localeCompare((null==(l=t.attributes)?void 0:l.displayName)||t.basename,(0,g.aj)())},size:(e,t)=>(e.size||0)-(t.size||0),mtime:(e,t)=>{var i,l,n,o;return((null==(l=null==(i=t.mtime)?void 0:i.getTime)?void 0:l.call(i))||0)-((null==(o=null==(n=e.mtime)?void 0:n.getTime)?void 0:o.call(n))||0)}};return[...o.files].sort(((i,l)=>(l.type===_.Tv.Folder?1:0)-(i.type===_.Tv.Folder?1:0)||(f?(l.attributes.favorite?1:0)-(i.attributes.favorite?1:0):0)||e[c.value.order](i,l,t[c.value.sortBy])))})),m=(0,l.Fl)((()=>o.files.filter((e=>o.allowPickDirectory||e.type!==_.Tv.Folder)))),k=(0,l.Fl)((()=>!o.loading&&o.selectedFiles.length>0&&o.selectedFiles.length>=m.value.length));const F=(0,l.iH)(4),S=(0,l.iH)();{const e=()=>(0,l.Y3)((()=>{var e,t,i,l,n;const o=(null==(t=null==(e=S.value)?void 0:e.parentElement)?void 0:t.children)||[];let a=(null==(l=null==(i=S.value)?void 0:i.parentElement)?void 0:l.clientHeight)||450;for(let e=0;e<o.length;e++)null!=(n=S.value)&&n.isSameNode(o[e])||(a-=o[e].clientHeight);F.value=Math.floor((a-50)/50)}));(0,l.bv)((()=>{window.addEventListener("resize",e),e()})),(0,l.Ah)((()=>{window.removeEventListener("resize",e)}))}return{__sfc:!0,props:o,emit:i,customSortingConfig:s,filesAppSorting:r,sortingConfig:c,sortByName:u,sortBySize:d,sortByModified:p,toggleSorting:e=>{c.value.sortBy===e?"ascending"===c.value.order?s.value={sortBy:c.value.sortBy,order:"descending"}:s.value={sortBy:c.value.sortBy,order:"ascending"}:s.value={sortBy:e,order:"ascending"}},sortFavoritesFirst:f,sortedFiles:v,selectableFiles:m,allSelected:k,onSelectAll:function(){o.selectedFiles.length<m.value.length?i("update:selectedFiles",m.value):i("update:selectedFiles",[])},onNodeSelected:function(e){o.selectedFiles.includes(e)?i("update:selectedFiles",o.selectedFiles.filter((t=>t.path!==e.path))):o.multiselect?i("update:selectedFiles",[...o.selectedFiles,e]):i("update:selectedFiles",[e])},onChangeDirectory:function(e){i("update:path",(0,h.join)(o.path,e.basename))},skeletonNumber:F,fileContainer:S,NcButton:n.P2,NcCheckboxRadioSwitch:n.rw,t:C.t,IconSortAscending:P,IconSortDescending:z,LoadingTableRow:I,FileListRow:D}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t("div",{ref:"fileContainer",staticClass:"file-picker__files"},[t("table",[t("thead",[t("tr",[e.multiselect?t("th",{staticClass:"row-checkbox"},[t("span",{staticClass:"hidden-visually"},[e._v(" "+e._s(i.t("Select entry"))+" ")]),e.multiselect?t(i.NcCheckboxRadioSwitch,{attrs:{"aria-label":i.t("Select all entries"),checked:i.allSelected,"data-testid":"select-all-checkbox"},on:{"update:checked":i.onSelectAll}}):e._e()],1):e._e(),t("th",{staticClass:"row-name",attrs:{"aria-sort":i.sortByName}},[t("div",{staticClass:"header-wrapper"},[t("span",{staticClass:"file-picker__header-preview"}),t(i.NcButton,{attrs:{wide:!0,type:"tertiary","data-test":"file-picker_sort-name"},on:{click:function(e){return i.toggleSorting("basename")}},scopedSlots:e._u([{key:"icon",fn:function(){return["ascending"===i.sortByName?t(i.IconSortAscending,{attrs:{size:20}}):"descending"===i.sortByName?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Name"))+" ")])],1)]),t("th",{staticClass:"row-size",attrs:{"aria-sort":i.sortBySize}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(e){return i.toggleSorting("size")}},scopedSlots:e._u([{key:"icon",fn:function(){return["ascending"===i.sortBySize?t(i.IconSortAscending,{attrs:{size:20}}):"descending"===i.sortBySize?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Size"))+" ")])],1),t("th",{staticClass:"row-modified",attrs:{"aria-sort":i.sortByModified}},[t(i.NcButton,{attrs:{wide:!0,type:"tertiary"},on:{click:function(e){return i.toggleSorting("mtime")}},scopedSlots:e._u([{key:"icon",fn:function(){return["ascending"===i.sortByModified?t(i.IconSortAscending,{attrs:{size:20}}):"descending"===i.sortByModified?t(i.IconSortDescending,{attrs:{size:20}}):t("span",{staticStyle:{width:"44px"}})]},proxy:!0}])},[e._v(" "+e._s(i.t("Modified"))+" ")])],1)])]),t("tbody",[e.loading?e._l(i.skeletonNumber,(function(l){return t(i.LoadingTableRow,{key:l,attrs:{"show-checkbox":e.multiselect}})})):e._l(i.sortedFiles,(function(l){return t(i.FileListRow,{key:l.fileid||l.path,attrs:{"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":e.multiselect||0===e.selectedFiles.length||e.selectedFiles.includes(l),selected:e.selectedFiles.includes(l),node:l},on:{"update:selected":function(e){return i.onNodeSelected(l)},"enter-directory":i.onChangeDirectory}})}))],2)])])}),[],!1,null,"ecc68c3c",null,null).exports;const $=F({name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon home-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const R=F({name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon plus-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const A=F((0,l.aZ)({__name:"FilePickerBreadcrumbs",props:{path:null,showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,t){let{emit:i}=t;const o=e,a=(0,l.iH)(""),s=(0,l.iH)();function r(){var e,t,i,l;const n=a.value.trim(),o=null==(t=null==(e=s.value)?void 0:e.$el)?void 0:t.querySelector("input");let r="";return 0===n.length?r=(0,C.t)("Folder name cannot be empty."):n.includes("/")?r=(0,C.t)('"/" is not allowed inside a folder name.'):["..","."].includes(n)?r=(0,C.t)('"{name}" is an invalid folder name.',{name:n}):null!=(i=window.OC.config)&&i.blacklist_files_regex&&n.match(null==(l=window.OC.config)?void 0:l.blacklist_files_regex)&&(r=(0,C.t)('"{name}" is not an allowed folder name',{name:n})),o&&o.setCustomValidity(r),""===r}const c=(0,l.Fl)((()=>o.path.split("/").filter((e=>""!==e)).map(((e,t,i)=>({name:e,path:"/"+i.slice(0,t+1).join("/")})))));return{__sfc:!0,props:o,emit:i,newNodeName:a,nameInput:s,validateInput:r,onSubmit:function(){const e=a.value.trim();r()&&(i("create-node",e),a.value="")},pathElements:c,IconFolder:H,IconHome:$,IconPlus:R,NcActions:n.O3,NcActionInput:n.Iw,NcBreadcrumbs:n.fg,NcBreadcrumb:n.$U,t:C.t}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.NcBreadcrumbs,{staticClass:"file-picker__breadcrumbs",scopedSlots:e._u([{key:"default",fn:function(){return[t(i.NcBreadcrumb,{attrs:{name:i.t("Home"),title:i.t("Home")},on:{click:function(e){return i.emit("update:path","/")}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconHome,{attrs:{size:20}})]},proxy:!0}])}),e._l(i.pathElements,(function(e){return t(i.NcBreadcrumb,{key:e.path,attrs:{name:e.name,title:e.path},on:{click:function(t){return i.emit("update:path",e.path)}}})}))]},proxy:!0},e.showMenu?{key:"actions",fn:function(){return[t(i.NcActions,{attrs:{"aria-label":i.t("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":i.t("New"),type:"secondary"},on:{close:function(e){i.newNodeName=""}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!1,2971667417)},[t(i.NcActionInput,{ref:"nameInput",attrs:{value:i.newNodeName,label:i.t("New folder"),placeholder:i.t("New folder name")},on:{"update:value":function(e){i.newNodeName=e},submit:i.onSubmit,input:i.validateInput},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFolder,{attrs:{size:20}})]},proxy:!0}],null,!1,1614167509)})],1)]},proxy:!0}:null],null,!0)})}),[],!1,null,"3bc9efa5",null,null).exports;const T=F({name:"ClockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon clock-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const Z=F({name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon close-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const E=F({name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon magnify-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const U=F({name:"StarIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},(function(){var e=this,t=e._self._c;return t("span",e._b({staticClass:"material-design-icon star-icon",attrs:{"aria-hidden":!e.title,"aria-label":e.title,role:"img"},on:{click:function(t){return e.$emit("click",t)}}},"span",e.$attrs,!1),[t("svg",{staticClass:"material-design-icon__svg",attrs:{fill:e.fillColor,width:e.size,height:e.size,viewBox:"0 0 24 24"}},[t("path",{attrs:{d:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"}},[e.title?t("title",[e._v(e._s(e.title))]):e._e()])])])}),[],!1,null,null,null,null).exports;const j=F((0,l.aZ)({__name:"FilePickerNavigation",props:{currentView:null,filterString:null,isCollapsed:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,t){let{emit:i}=t;const o=e,a=[{id:"files",label:(0,C.t)("All files"),icon:H},{id:"recent",label:(0,C.t)("Recent"),icon:T},{id:"favorites",label:(0,C.t)("Favorites"),icon:U}],s=(0,l.Fl)((()=>a.filter((e=>e.id===o.currentView))[0]));return{__sfc:!0,allViews:a,props:o,emit:i,currentViewObject:s,updateFilterValue:e=>i("update:filterString",e),IconClose:Z,IconMagnify:E,NcButton:n.P2,NcSelect:n.QG,NcTextField:n.h3,t:C.t,Fragment:k.H}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.Fragment,[t(i.NcTextField,{staticClass:"file-picker__filter-input",attrs:{value:e.filterString,label:i.t("Filter file list"),"show-trailing-button":!!e.filterString},on:{"update:value":i.updateFilterValue,"trailing-button-click":function(e){return i.updateFilterValue("")}},scopedSlots:e._u([{key:"trailing-button-icon",fn:function(){return[t(i.IconClose,{attrs:{size:16}})]},proxy:!0}])},[t(i.IconMagnify,{attrs:{size:16}})],1),e.isCollapsed?t(i.NcSelect,{attrs:{"aria-label":i.t("Current view selector"),clearable:!1,searchable:!1,options:i.allViews,value:i.currentViewObject},on:{input:e=>i.emit("update:currentView",e.id)}}):t("ul",{staticClass:"file-picker__side",attrs:{role:"tablist","aria-label":i.t("Filepicker sections")}},e._l(i.allViews,(function(l){return t("li",{key:l.id},[t(i.NcButton,{attrs:{"aria-selected":e.currentView===l.id,type:e.currentView===l.id?"primary":"tertiary",wide:!0,role:"tab"},on:{click:function(t){return e.$emit("update:currentView",l.id)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(l.icon,{tag:"component",attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(l.label)+" ")])],1)})),0)],1)}),[],!1,null,"fcfd0f23",null,null).exports;const O=F((0,l.aZ)({name:"FilePicker",props:{buttons:null,name:null,allowPickDirectory:{type:Boolean,default:!1},container:{default:"body"},filterFn:{default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!0},path:{default:"/"}},emits:["close"],setup(e,t){let{emit:i}=t;const o=e,a=(0,l.Fl)((()=>({container:o.container,name:o.name,buttons:s.value,size:"large",contentClasses:["file-picker__content"],dialogClasses:["file-picker"],navigationClasses:["file-picker__navigation"]}))),s=(0,l.Fl)((()=>("function"==typeof o.buttons?o.buttons(u.value,f.value,r.value):o.buttons).map((e=>({...e,callback:async()=>{const t=0===u.value.length&&o.allowPickDirectory?[await b(f.value)]:u.value;e.callback(t),i("close",u.value)}}))))),r=(0,l.iH)("files"),c=(0,l.Fl)((()=>"favorites"===r.value?(0,C.t)("Favorites"):"recent"===r.value?(0,C.t)("Recent"):"")),u=(0,l.iH)([]),d=(0,l.iH)((null==window?void 0:window.sessionStorage.getItem("NC.FilePicker.LastPath"))||"/"),p=(0,l.iH)(),f=(0,l.Fl)({get:()=>"files"===r.value?p.value||o.path||d.value:"/",set:e=>{void 0===o.path&&window.sessionStorage.setItem("NC.FilePicker.LastPath",e),p.value=e,u.value=[]}}),v=(0,l.iH)(""),{isSupportedMimeType:m}=function(e){const t=(0,l.Fl)((()=>e.value.map((e=>e.split("/")))));return{isSupportedMimeType:e=>{const i=e.split("/");return t.value.some((e=>{let[t,l]=e;return!(i[0]!==t&&"*"!==t||i[1]!==l&&"*"!==l)}))}}}((0,l.Vh)(o,"mimetypeFilter")),{files:g,isLoading:w,loadFiles:y,getFile:b,client:k}=function(e,t){const i=(0,_.rp)(),n=(0,l.iH)([]),o=(0,l.iH)(!0);async function a(){if(o.value=!0,"favorites"===e.value)n.value=await(0,_.pC)(i,t.value);else if("recent"===e.value){const e=Math.round(Date.now()/1e3)-1209600,{data:t}=await i.search("/",{details:!0,data:(0,_.tB)(e)});n.value=t.results.map((e=>(0,_.RL)(e)))}else{const e=await i.getDirectoryContents("".concat(_._o).concat(t.value),{details:!0,data:(0,_.h7)()});n.value=e.data.map((e=>(0,_.RL)(e)))}o.value=!1}return(0,l.YP)([e,t],(()=>a())),(0,l.bv)((()=>a())),{isLoading:o,files:n,loadFiles:()=>a(),getFile:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_._o;const l=await i.stat("".concat(t).concat(e),{details:!0});return(0,_.RL)(l.data)},client:i}}(r,f);(0,l.bv)((()=>y()));const{showHiddenFiles:F}=B(),x=(0,l.Fl)((()=>{let e=g.value;return F.value||(e=e.filter((e=>!e.basename.startsWith(".")))),o.mimetypeFilter.length>0&&(e=e.filter((e=>"folder"===e.type||e.mime&&m(e.mime)))),v.value&&(e=e.filter((e=>e.basename.toLowerCase().includes(v.value.toLowerCase())))),o.filterFn&&(e=e.filter((e=>o.filterFn(e)))),e})),P=(0,l.Fl)((()=>"files"===r.value?(0,C.t)("Upload some content or sync with your devices!"):"recent"===r.value?(0,C.t)("Files and folders you recently modified will show up here."):(0,C.t)("Files and folders you mark as favorite will show up here.")));return{__sfc:!0,props:o,emit:i,dialogProps:a,dialogButtons:s,currentView:r,viewHeadline:c,selectedFiles:u,savedPath:d,navigatedPath:p,currentPath:f,filterString:v,isSupportedMimeType:m,files:g,isLoading:w,loadFiles:y,getFile:b,client:k,showHiddenFiles:F,filteredFiles:x,noFilesDescription:P,onCreateFolder:e=>{k.createDirectory((0,h.join)(_._o,f.value,e)).then((()=>y())).catch((e=>(0,C.k)((0,C.t)("Could not create the new folder"))))},IconFile:S,DialogBase:N,FileList:M,FilePickerBreadcrumbs:A,FilePickerNavigation:j,NcEmptyContent:n.SL,t:C.t}}}),(function(){var e=this,t=e._self._c,i=e._self._setupProxy;return t(i.DialogBase,e._b({on:{close:function(e){return i.emit("close")}},scopedSlots:e._u([{key:"navigation",fn:function(e){let{isCollapsed:l}=e;return[t(i.FilePickerNavigation,{attrs:{"is-collapsed":l,"current-view":i.currentView,"filter-string":i.filterString},on:{"update:currentView":function(e){i.currentView=e},"update:current-view":function(e){i.currentView=e},"update:filterString":function(e){i.filterString=e},"update:filter-string":function(e){i.filterString=e}}})]}}])},"DialogBase",i.dialogProps,!1),[t("div",{staticClass:"file-picker__main"},["files"===i.currentView?t(i.FilePickerBreadcrumbs,{attrs:{path:i.currentPath,"show-menu":e.allowPickDirectory},on:{"update:path":function(e){i.currentPath=e},"create-node":i.onCreateFolder}}):t("div",{staticClass:"file-picker__view"},[t("h3",[e._v(e._s(i.viewHeadline))])]),i.isLoading||i.filteredFiles.length>0?t(i.FileList,{attrs:{"allow-pick-directory":e.allowPickDirectory,"current-view":i.currentView,files:i.filteredFiles,multiselect:e.multiselect,loading:i.isLoading,path:i.currentPath,"selected-files":i.selectedFiles,name:i.viewHeadline},on:{"update:path":[function(e){i.currentPath=e},function(e){i.currentView="files"}],"update:selectedFiles":function(e){i.selectedFiles=e},"update:selected-files":function(e){i.selectedFiles=e}}}):i.filterString?t(i.NcEmptyContent,{attrs:{name:i.t("No matching files"),description:i.t("No files matching your filter were found.")},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])}):t(i.NcEmptyContent,{attrs:{name:i.t("No files in here"),description:i.noFilesDescription},scopedSlots:e._u([{key:"icon",fn:function(){return[t(i.IconFile)]},proxy:!0}])})],1)])}),[],!1,null,"f979a44d",null,null).exports}}]);
//# sourceMappingURL=viewer-vendors-node_modules_nextcloud_dialogs_dist_chunks_FilePicker-c55dc760_mjs.js.map?v=5f29b9cd0e395e1ea43c